# Where to publish entity certificates
entity:
    #ldap@: connector:publishing.connectors.ldap-ext
    disk@: connector:publishing.connectors.local

crl:
    crl-disk@: connector:publishing.connectors.cdp
    crl-scp@: connector:publishing.connectors.cdp-scp

cacert:
    cacert-pem-disk@: connector:publishing.connectors.cacert-pem
    cacert-der-disk@: connector:publishing.connectors.cacert-der
    cacert-pem-scp@: connector:publishing.connectors.cacert-pem-scp
    cacert-der-scp@: connector:publishing.connectors.cacert-der-scp

connectors:
    #ldap-ext:
    #    class: Connector::Proxy::Net::LDAP::Single
    #    LOCATION: ldap://localhost:389
    #    base: ou=people,dc=mycompany,dc=com
    #    filter: (&(mail=[% ARGS.0 %]) (objectCategory=person))
    #    binddn: cn=admin,dc=mycompany,dc=com
    #    password: admin
    #    attrmap:
    #        der: usercertificate;binary
    #
    #    create:
    #        basedn: ou=people,dc=mycompany,dc=com
    #        rdnkey: cn
    #
    #    schema:
    #        cn:
    #            objectclass: inetOrgPerson
    #            values:
    #                sn: copy:self
    #                ou: IT Department

    local:
        class: Connector::Builtin::File::Path
        LOCATION: /tmp/
        file: "[% ARGS.0.replace('[^\\w-]','') %].crt"
        content: "[% pem %]"

    cdp:
        class: Connector::Builtin::File::Path
        LOCATION: /var/www/certdata/
        file: "[% ARGS.0.replace('[^\\w-]','') %].crl"
        content: "[% der %]"
    
    cdp-scp:
        class: Connector::Builtin::File::SCP
        identity: /home/pkiadm/id_ecdsa_pkiadm
        LOCATION: pkiadm@kortirion:/inetpub/wwwroot/certdata/
        file: "[% ARGS.0.replace('[^\\w-]','') %].crl"
        content: "[% der %]"

    cacert-pem:
        class: Connector::Builtin::File::Path
        LOCATION: /var/www/certdata/
        file: "[% ARGS.0.replace('[^\\w-]','') %].crt"
        content: "[% pem %]"

    cacert-pem-scp:
        class: Connector::Builtin::File::SCP
        identity: /home/pkiadm/id_ecdsa_pkiadm
        LOCATION: pkiadm@kortirion:/inetpub/wwwroot/certdata/
        file: "[% ARGS.0.replace('[^\\w-]','') %].crt"
        content: "[% pem %]"

    cacert-der:
        class: Connector::Builtin::File::Path
        LOCATION: /var/www/certdata/
        file: "[% ARGS.0.replace('[^\\w-]','') %].cer"
        content: "[% der %]"

    cacert-der-scp:
        class: Connector::Builtin::File::SCP
        identity: /home/pkiadm/id_ecdsa_pkiadm
        LOCATION: pkiadm@kortirion:/inetpub/wwwroot/certdata/
        file: "[% ARGS.0.replace('[^\\w-]','') %].cer"
        content: "[% der %]"